---
description: 分析 Android 项目 Kotlin 文件
globs: 
alwaysApply: false
---
# Android 项目 Kotlin 文件分析指令

## 任务描述

你的任务是对提供的 Android Kotlin 代码文件进行全面分析，帮助我更深入地理解代码的结构、功能和技术特性。请从文件基本信息、分层架构、代码质量、UML 类图、业务流程等多个维度进行详细分析，并提供清晰的结构化总结。总结应客观呈现代码文件的核心功能和技术特点，以清晰的结构组织内容，方便中文读者快速理解和应用。

## 具体要求

### 文件基本信息

- **文件名称**：提供完整文件名
- **文件路径**：在项目中的相对路径
- **主要功能**：简要概述文件的核心功能和职责
- **技术要点**：列出文件中使用的关键技术点和特性

### 代码元素分析

#### 文件元素概览

- **包声明**：分析文件的包结构和命名规范
- **导入声明**：归类并分析导入的包和依赖
- **元素统计**：以表格形式列出文件包含的各类元素数量

  | 元素类型 | 数量 | 备注 |
  |---------|------|------|
  | 类      | 0    | 包括普通类、数据类、密封类等 |
  | 接口    | 0    | 包括接口定义 |
  | 对象    | 0    | 包括单例对象、伴生对象等 |
  | 函数    | 0    | 包括顶层函数、Composable 函数等 |
  | 扩展函数 | 0    | Kotlin 扩展函数 |
  | 属性    | 0    | 顶层属性、常量等 |

#### 类与接口分析

对每个主要类和接口进行详细分析：

- **类/接口名称**：完整类名
- **类型**：普通类、数据类、密封类、接口等
- **职责描述**：该类在系统中的角色和主要职责
- **属性分析**：列出并分析关键属性及其用途
  
  | 属性名 | 类型 | 可见性 | 用途 |
  |-------|------|-------|------|
  | 属性1 | Type | public/private | 描述属性用途 |

- **方法分析**：列出并分析关键方法
  
  | 方法名 | 参数 | 返回类型 | 用途 |
  |-------|------|---------|------|
  | 方法1 | (param: Type) | ReturnType | 描述方法用途 |

- **类 UML 图**：使用 Mermaid 语法为该类绘制 UML 类图
  
  ```mermaid
  classDiagram
      class AnalyzedClass {
          -privateProperty: Type
          +publicProperty: Type
          +publicMethod(param: Type): ReturnType
      }
      AnalyzedClass --|> ParentClass
  ```

- **继承关系**：分析类的继承体系和实现的接口
- **依赖关系**：分析类与其他类/接口的依赖关系

#### 函数分析

对每个重要函数进行详细分析：

- **函数名称**：完整函数名
- **函数签名**：包含参数和返回类型的完整签名
- **函数职责**：描述函数的主要功能和用途
- **参数分析**：分析每个参数的用途和限制条件
- **返回值分析**：分析返回值的含义和可能的状态
- **函数流程图**：使用 Mermaid 语法绘制函数的执行流程
  
  ```mermaid
  flowchart TD
      A[函数开始] --> B{参数检查}
      B -->|有效| C[核心逻辑处理]
      B -->|无效| D[错误处理]
      C --> E[返回结果]
      D --> F[返回错误]
  ```

- **调用关系**：分析该函数与其他函数的调用关系
- **边界条件**：分析函数在极限情况下的行为
- **复杂度分析**：评估函数的时间和空间复杂度

#### Composable 函数分析（如适用）

对 Composable 函数的特殊分析：

- **参数与状态**：分析函数参数和内部状态管理
- **重组行为**：分析函数的重组特性和优化措施
- **UI 结构图**：绘制函数生成的 UI 组件层次结构
- **生命周期效应**：分析与生命周期相关的副作用处理

#### 全局变量与常量分析

- **变量/常量名**：完整名称
- **类型**：数据类型
- **作用域**：变量/常量的可见性和作用范围
- **用途**：描述其在系统中的用途和重要性
- **初始化**：分析初始化方式和时机
- **使用方式**：分析在代码中的使用模式

#### 扩展函数/属性分析

- **扩展名称**：完整扩展函数/属性名
- **扩展类型**：分析被扩展的类型
- **功能描述**：描述扩展添加的功能
- **使用场景**：分析适用的场景和限制

### Kotlin 语法分析

- **Kotlin 特性**：分析使用的 Kotlin 高级特性（如扩展函数、高阶函数、DSL 等）
- **Kotlin 语法**：分析使用的 Kotlin 语法特性（如密封类、数据类、协程、Flow 等）  

### API 使用分析

- **重要 API**：列出代码文件中使用的重要 API

  | API 名称 | 用途 | 文档链接 |
  |---------|------|---------|
  | API 1   | 用途说明 | [链接](https://example.com) |
  | API 2   | 用途说明 | [链接](https://example.com) |

- **第三方库**：分析使用的第三方库及其用途

### 注意事项与最佳实践

- **优点**：指出代码中值得学习的良好实践
- **改进空间**：提出可能的改进建议
- **风险点**：指出潜在的风险或问题
